let keys=document.querySelectorAll(".key"),gameOverMessage=document.getElementById("game-over-message"),lives=document.querySelectorAll(".tries img"),selectedKeys=document.querySelectorAll(".key.wrong"),lastSelectedKey=selectedKeys[selectedKeys.length-1],allLetters=document.querySelectorAll("#phrase .letter"),revealedLetters=document.querySelectorAll("#phrase .letter.show");class Game{constructor(){this.missed=0,this.phrases=[new Phrase("The box is never empty"),new Phrase("Do it and make it count"),new Phrase("Be in this moment for good"),new Phrase("The light shines tomorrow"),new Phrase("Question everything"),],this.activePhrase=null}handleInteraction(e){let t=this.activePhrase.checkLetter(e);if(t){this.activePhrase.showMatchedLetter(e);let s=this.checkForWin();s&&this.gameOver("won")}else{let r=Array.from(keys).find(t=>t.textContent.toLowerCase()===e);r&&(r.classList.add("wrong"),r.disabled=!0,this.removeLife())}}addKeyListeners(){keys.forEach(e=>{e.addEventListener("click",t=>{if(t.stopPropagation(),console.log("Clicked:",t.target),t.target.classList.contains("key")){t.stopPropagation();let s=t.target.textContent.toLowerCase();console.log("Selected Letter:",s);let r=!this.activePhrase.checkLetter(s);if(r)e.classList.add("wrong"),e.disabled=!0,this.removeLife();else{e.classList.add("chosen"),this.activePhrase.showMatchedLetter(s);let l=this.checkForWin();l&&this.gameOver("won")}}})})}getRandomPhrase(){return this.phrases[Math.floor(Math.random()*this.phrases.length)]}startGame(){document.querySelector("#overlay").style.display="none",this.resetGame(),this.activePhrase=this.getRandomPhrase(),this.activePhrase.addPhraseToDisplay()}gameOver(e){let t=document.getElementById("overlay");t.style.display="block",t.classList.add("won"===e?"win":"lose"),document.getElementById("game-over-message").textContent="won"===e?"Congratulations, You Won!":"Sorry, You Lost. Try Again!"}checkForWin(){let e=document.querySelectorAll(".letter"),t=document.querySelectorAll(".letter.show");return e.length===t.length}removeLife(){this.missed<lives.length&&(lives[this.missed].src="images/lostHeart.png",this.missed++,this.missed===lives.length&&this.gameOver("lost"))}getLastSelectedKeyText(){let e=document.querySelectorAll(".key.wrong"),t=e[e.length-1];return t?t.textContent:null}resetGame(){let e=document.querySelector("#overlay");e.classList.remove("lose","win"),document.querySelector("#game-over-message").textContent="",document.querySelector("#phrase ul").innerHTML="",this.missed=0;let t=document.querySelectorAll(".tries img");t.forEach(e=>{e.src="images/liveHeart.png"});let s=document.querySelectorAll(".key");s.forEach(e=>{e.classList.remove("chosen","wrong"),e.disabled=!1})}}const game=new Game;game.addKeyListeners(),document.getElementById("btn__reset").addEventListener("click",()=>{game.startGame()});